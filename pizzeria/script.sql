create database pizzeria;
use pizzeria;
-- CREACION PROVINCIES
CREATE TABLE `pizzeria`.`provincies` ( `id` INT NOT NULL AUTO_INCREMENT , `codi_provincia` INT NOT NULL , `nom_provincia` VARCHAR(50) NOT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB; 
INSERT INTO `provincies` (`id`, `codi_provincia`, `nom_provincia`) VALUES (NULL, '8', 'Barcelona'),(NULL, '28', 'Madrid'),(NULL, '3', 'Alicante'),(NULL, '17', 'Girona'),(NULL, '43', 'Tarragona'),(NULL, '2', 'Albacete');
-- creacio poblacions
CREATE TABLE `pizzeria`.`poblacions` ( `id` INT NOT NULL AUTO_INCREMENT , `codi_provincia` INT NOT NULL , `codi_poblacio` INT NOT NULL , `nom_poblacio` VARCHAR(80) NOT NULL , PRIMARY KEY (`id`), UNIQUE `codi_poblacio` (`codi_poblacio`)) ENGINE = InnoDB; 
INSERT INTO `poblacions` (`id`, `codi_provincia`, `codi_poblacio`, `nom_poblacio`) VALUES (NULL, '2', '1', 'Albacete'), (NULL, '3', '2', 'Elda'), (NULL, '8', '3', 'Barcelona'), (NULL, '28', '4', 'Madrid'), (NULL, '43', '5', 'Tarragona'), (NULL, '17', '6', 'Girona');
-- creacio botiga
CREATE TABLE `pizzeria`.`botiga` ( `id` INT NOT NULL AUTO_INCREMENT , `codi_botiga` INT NOT NULL , `adreça` VARCHAR(100) NOT NULL , `codi_postal` CHAR(5) NOT NULL , `codi_poblacio` INT NOT NULL , PRIMARY KEY (`id`), UNIQUE `codi_botiga` (`codi_botiga`)) ENGINE = InnoDB; 
INSERT INTO `botiga` (`id`, `codi_botiga`, `adreça`, `codi_postal`, `codi_poblacio`) VALUES (NULL, '3', 'Aragó 256', '08015', '3'), (NULL, '1', 'Del Atascaburras 54', '02125', '1'), (NULL, '2', 'Del Mar 98', '03855', '2'), (NULL, '4', 'Zumalacarregui 65', '28655', '4'), (NULL, '5', 'Mediterrani 22', '43252', '5'), (' ', '6', 'Del Call 7', '17254', '6');
-- creacio empleats
CREATE TABLE `pizzeria`.`empleats` ( `id` INT NOT NULL AUTO_INCREMENT , `codi_empleat` INT NOT NULL , `codi_botiga` INT NOT NULL , `nom` VARCHAR(100) NOT NULL , `nif` CHAR(10) NOT NULL , `telefon` CHAR(10) NOT NULL , `feina` BOOLEAN NOT NULL , PRIMARY KEY (`id`), UNIQUE `codi_empleat` (`codi_empleat`)) ENGINE = InnoDB; 
INSERT INTO `empleats` (`id`, `codi_empleat`, `codi_botiga`, `nom`, `nif`, `telefon`, `feina`) VALUES (NULL, '11', '1', 'Pedro Pérez', '35564585E', '695211548', '1'), (NULL, '12', '1', 'Amanda Martí', '65548226J', '650556644', '2'), (NULL, '21', '2', 'Georgina Sali', '665445886T', '690554466', '1'), (NULL, '22', '2', 'Carles Martínez', '554668995H', '886665789', '2'), (NULL, '31', '3', 'Roberto Pozo', '665448556F', '658442561', '1'), (NULL, '32', '3', 'Núria Peña', '665895664S', '99875562', '2'), (NULL, '41', '4', 'Cristina Lacorte', '55688545G', '99866656', '1'), (NULL, '42', '4', 'Pere Badallo', '56588565R', '55655854', '2'), (NULL, '51', '5', 'Jeni Celaya', '545885665G', '690665578', '1'), (NULL, '52', '5', 'Federico Nuyes', '565222588A', '565482265', '2'), (NULL, '61', '6', 'Marisa Ibañez', '545888578F', '554856552', '1'), (NULL, '62', '6', 'Suso Salvador', '650885456L', '58687889', '2');
-- creacio categoria
CREATE TABLE `pizzeria`.`categories` ( `id` INT NOT NULL AUTO_INCREMENT , `codi_categoria` INT NOT NULL , `descripcio` VARCHAR(100) NOT NULL , PRIMARY KEY (`id`), UNIQUE `codi_categoria` (`codi_categoria`)) ENGINE = InnoDB; 
INSERT INTO `categories` (`id`, `codi_categoria`, `descripcio`) VALUES (NULL, '10', 'Begudes'), (NULL, '20', 'Hamburgueses'), (NULL, '30', 'Pizzes temporada'), (NULL, '31', 'Pizzes Gourmet'), (NULL, '32', 'Pizzes veganes');
-- creacio productes
CREATE TABLE `pizzeria`.`productes` ( `id` INT NOT NULL AUTO_INCREMENT , `codi_producte` INT NOT NULL , `categoria_producte` INT NOT NULL , `nom_producte` VARCHAR(50) NOT NULL , `descripcio` VARCHAR(50) NOT NULL , `foto` VARCHAR(100) NOT NULL , `preu` DECIMAL(6,2) NOT NULL , PRIMARY KEY (`id`), UNIQUE `codi_producte` (`codi_producte`)) ENGINE = InnoDB; 
INSERT INTO `productes` (`id`, `codi_producte`, `categoria_producte`, `nom_producte`, `descripcio`, `foto`, `preu`) VALUES (NULL, '1001', '10', 'refresc', 'refresc 18cc', '\\img\\3534534434.jpg', '2.4'), (NULL, '1002', '10', 'aigua', 'ampolla aigua 25cc', '\\img\\5566485219.jpg', '1.8'), (NULL, '1003', '10', 'vi', 'ampolla vi 38cl', 'img\\5688442516.jpg', '6.5'), (NULL, '1004', '10', 'cervessa artesana', 'cervessa 33 cc', '\\img\\85655456922.jpg', '3.5'), (null, '2001', '20', 'Hamburguesa', 'Hamburguesa sencilla', '\\img\\2345568447.jpg', '3.6'), (NULL, '2002', '20', 'Hamburguesa complerta', 'Hamburguesa amb formatge, ceba, bacon', '\\img\\6643236887.jpg', '4.8'), (NULL, '2003', '20', 'Hamburguesa vegana', 'Hamburguesa sense producte animal', '\\img\\9583344359.jpg', '4.00'), (NULL, '3001', '30', 'pizza margarita', 'mozzarella i tomaquet', '\\img\\3345345787.jpg', '9.8'), (NULL, '3002', '30', '4 formatges', 'emmetal, mozzarella, blau, peccorino', '\\img\\4450034532.jpg', '10.0'), (NULL, '3101', '31', 'pizza foie', 'formatge, ceba i foie', '\\img\\4435366945.jpg', '12.5'), (NULL, '3102', '31', 'pizza salmó', 'ceba, brie, salmó fumat', '\\img\\3342355456.jpg', '13.25'), (NULL, '3103', '31', 'pizza serrana', 'pernil, llom, formatge', '\\img\\6653544578.jpg', '14.50'), (NULL, '3201', '32', 'Pizza vegetal', 'Verdures ', '\\img\\5434566534.jpg', '9.80'), (NULL, '3202', '32', 'Pizza tomaquet', 'tomaquets 3 textures', '\\img\\3343323456.jpg', '8.80');
-- creacio clients
CREATE TABLE `pizzeria`.`clients` ( `id` INT NOT NULL AUTO_INCREMENT , `codi_client` INT NOT NULL , `nom` VARCHAR(100) NOT NULL , `adreça` VARCHAR(100) NOT NULL , `codi_postal` CHAR(5) NOT NULL , `codi_poblacio` INT NOT NULL , `telefon` CHAR(10) NOT NULL , PRIMARY KEY (`id`), UNIQUE `codi_client` (`codi_client`)) ENGINE = InnoDB; 
INSERT INTO `clients` (`id`, `codi_client`, `nom`, `adreça`, `codi_postal`, `codi_poblacio`, `telefon`) VALUES (NULL, '1', 'Pere Armanag', 'Viladomat 235 4-1', '08016', '3', '936665898'), (NULL, '2', 'Francisco Valladar', 'Santa Anna 343,5-4', '28653', '4', '9165584455'), (NULL, '3', 'Marisa Felix', 'Muralles 43 1', '43225', '5', '9655462'), (NULL, '4', 'Narcis Vives', 'Samarena 43', '17215', '6', '65585522');
--creacio comandes
CREATE TABLE `pizzeria`.`comandes` ( `id` INT NOT NULL AUTO_INCREMENT , `codi_empleat` INT NOT NULL , `codi_client` INT NOT NULL , `codi_botiga` INT NOT NULL , `codi_botiga` INT NOT NULL , `data_comanda` DATE NOT NULL , `hora_comanda` TIME NOT NULL , `domicili` BOOLEAN NOT NULL , `data_lliurament` DATE NULL , `hora_lliurament` TIME NULL , `import_comanda` DECIMAL(6,2) NOT NULL , PRIMARY KEY (`id`), UNIQUE `codi_comanda` (`codi_comanda`)) ENGINE = InnoDB; 
INSERT INTO `comandes` (`id`, `codi_comanda`, `codi_client`, `codi_botiga`, `codi_empleat`, `data_comanda`, `hora_comanda`, `domicili`, `data_lliurament`, `hora_lliurament`, `import_comanda`) VALUES (NULL, '1', '1', '3', '31', '2021-11-12', '18:10:34', '0', NULL, NULL, '34.60'), (NULL, '2', '2', '4','41', '2021-11-12', '20:10:34', '1', '2021-11-12', '19:25:34', '36.40'), (NULL, '3', '1', '3','31', '2021-11-13', '20:25:00', '1', '2021-11-13', '20:50:00', '25.60'), (NULL, '4', '2', '4', '41', '2021-11-13', '20:15:25', '1', '2021-11-13', '20:30:00', '25.60'), (NULL, '5', '2', '4', '41','2021-11-14', '21:00', '1', '2021-11-14', '21:15', '32.50'), (NULL, '6', '2', '4', '41','2021-11-15', '20:50', '1', '2021-11-15', '21:15', '45.00');
--creacio linees de comanda
CREATE TABLE `pizzeria`.`linees_comandes` ( `id` INT NOT NULL AUTO_INCREMENT , `linea` INT NOT NULL , `comanda` INT NOT NULL , `producte` INT NOT NULL , `quantitat` SMALLINT NOT NULL , `import` DECIMAL(6,2) NOT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB; 
INSERT INTO `linees_comandes` (`id`, `linea`, `comanda`, `producte`, `quantitat`, `import`) VALUES (NULL, '1', '1', '2002', '4', '20'), (NULL, '2', '1', '1004', '4', '16'), (NULL, '1', '2', '3101', '1', '13'), (NULL, '2', '2', '3202', '2', '26'), (NULL, '3', '2', '1003', '1', '7'), (NULL, '4', '2', '1002', '3', '6');
-- consultes
select producte, nom_producte, quantitat, codi_poblacio from linees_comandes, productes, categories, comandes, clients where producte = codi_producte and categoria_producte = codi_categoria and codi_categoria=10 and comanda = codi_comanda and comandes.codi_client = clients.codi_client and codi_poblacio = 3;  ; 
select count(codi_empleat), codi_empleat from comandes group by codi_empleat;
